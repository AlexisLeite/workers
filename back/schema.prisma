// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url      = env("DATABASE_URL")
  provider = "sqlite"
}

generator client {
  provider   = "prisma-client-js"
  output     = "node_modules/.prisma/client"
  engineType = "binary"
}

model Worker {
  id            String   @id @default(cuid())
  name          String   @unique @default("")
  birthDate     DateTime
  admissionDate DateTime @default(now())
  phone         String   @default("")
  address       String   @default("")
  password      String
  tasks         Task[]   @relation("Task_worker")
  role          Role?    @relation("Worker_role", fields: [roleId], references: [id])
  roleId        String?  @map("role")

  @@index([roleId])
}

model Role {
  id      String   @id @default(cuid())
  label   String   @default("")
  code    String   @default("")
  workers Worker[] @relation("Worker_role")
}

model Task {
  id           String      @id @default(cuid())
  details      String      @default("")
  images       TaskImage[] @relation("TaskImage_task")
  creationDate DateTime?   @default(now())
  worker       Worker?     @relation("Task_worker", fields: [workerId], references: [id])
  workerId     String?     @map("worker")
  status       String?     @default("pending")

  @@index([workerId])
}

model TaskImage {
  id     String  @id @default(cuid())
  url    String  @default("")
  task   Task?   @relation("TaskImage_task", fields: [taskId], references: [id])
  taskId String? @map("task")

  @@index([taskId])
}